<div ng-controller="MainSettingsCtrl" ng-init="init()">
    <form name="mainSettingsForm" style="padding: 0px 12px !important;">
        <h1>Post Permissions</h1>

        <div class="row">
            <div class="col-md-4">
                <label class="label2" style="font-size: 14px !important;">Allow autosubscribe</label>
            </div>
            <div class="col-md-8">
                <div class="button-switch">
                    <input id="autoSub" type="checkbox" ng-model="data.allowAutoSubscribe" ng-change="save()">
                    <label for="autoSub" class="label-success"></label>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <label class="label2" style="font-size: 14px !important;">Allow posts on main wall only by users with tags</label>
            </div>
            <div class="col-md-8">
                <div class="button-switch">
                    <input id="mainWallTag" type="checkbox" ng-model="data.allowMainThreadTags" ng-change="save()">
                    <label for="mainWallTag" class="label-success"></label>
                </div>
            </div>
        </div>

        <div class="row flex align-items-center justify-content-center" style="margin-bottom: 1.25rem;" ng-show="data.allowMainThreadTags">
            <div class="tooltip-container col-md-4">Tags
                <span class="btn-info-icon btn-primary">
                    <span class="cp-tooltip">You may have to reload the pageif you have been applying these tags to yourself.</span>
                </span>
            </div>
            <div class="col-md-8">
                <div class="margin-bottom-ten" id="allowMainThreadTags"></div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <label class="label2" style="font-size: 14px !important;">Allow posts on side threads only by users with tags</label>
            </div>
            <div class="col-md-8">
                <div class="button-switch">
                    <input id="sideThreadTag" type="checkbox" ng-model="data.allowSideThreadTags" ng-change="save()">
                    <label for="sideThreadTag" class="label-success"></label>
                </div>
            </div>
        </div>

        <div class="row flex align-items-center justify-content-center" style="margin-bottom: 1.25rem;"
             ng-show="data.allowSideThreadTags">
            <div class="tooltip-container col-md-4">Tags
                <span class="btn-info-icon btn-primary">
                    <span class="cp-tooltip">
                        You may have to reload the page if you have been applying these tags to yourself.
                    </span>
                </span>
            </div>

            <div class="col-md-8">
                <div class="margin-bottom-ten" id="allowSideThreadUserTags"></div>
            </div>
        </div>

        <div class="row" style="margin-bottom: 1.25rem;">
            <div class="col-md-4">
                <label style="font-size: 14px !important;">Allow private chat</label>
            </div>
            <div class="col-md-2 radio radio-primary radio-inline" style="width: 20% !important;">
                <input id="noUsers" type="radio" name="allowChat" ng-model="data.allowChat" value="noUsers">
                <label class="subtitles-labels" for="noUsers">None</label>
            </div>
            <div class="col-md-2 radio radio-primary radio-inline" style="width: 20% !important;">
                <input id="AllUsers" type="radio" name="allowChat" ng-model="data.allowChat" value="allUsers">
                <label class="subtitles-labels" for="AllUsers">All users</label>
            </div>
            <div class="col-md-3 radio radio-primary radio-inline" style="width: 25% !important;">
                <input id="selectedUsers" type="radio" name="allowChat" ng-model="data.allowChat" value="selectedUsers">
                <label for="selectedUsers" class="tooltip-container bottom col-md-4">
                    <span class="nowrap">Selected users</span>
                    <span class="btn-info-icon btn-primary">
                        <span class="cp-tooltip">
                           Users added to the list will be able to send private messages to all users. Users that are not in the list, will be able to send private messages only to the users in the list.
                        </span>
                    </span>
                </label>
            </div>
        </div>
        <div class="row" ng-show="data.allowChat == 'selectedUsers'">
            <div class="col-md-9">
                <label class="subtitles-labels" style="font-size: 14px !important;">Allowed Users</label>
            </div>
            <div class="col-md-3 add-user-container-btn">
                <button class="btn btn-primary" id="addUser" ng-click="selectUsers()">
                    <span class="icon icon-plus margin-right-ten"></span>Select User
                </button>
            </div>
        </div>

        <div class="row" style="margin-bottom: 1.25rem;min-height: 240px;" ng-show="data.allowChat == 'selectedUsers'">
            <div class="col-md-5">
            </div>
            <div class="col-md-7">
                <table class="table table-bf hidden" id="headTable" style="margin-bottom: 0;">
                    <thead>
                    <th class="headerPadding" style="width: 56.5px;">
                        <h5 class="headerCell text-left"></h5>
                    </th>
                    <th class="headerPadding" style="width: 162px;">
                        <h5 class="headerCell text-left">User Name</h5>
                    </th>
                    <th class="editColumn"></th>
                    </thead>
                </table>
                <div class="tableDiv">
                    <table id="searchResults" class="table table-bf hidden"></table>
                </div>
                <div id="loading" class="well empty-state-lg">
                    <h5 class="text-center" style="margin-bottom: 0px">
                        Loading...
                    </h5>
                 </div>

                <div id="emptyTableContainer" class="well empty-state-lg hidden">
                    <h5 class="text-center">There is no any users added yet.</h5>
                    <br>
                </div>
            </div>
        </div>

        <div ng-show="data.allowChat == 'selectedUsers' || data.allowChat == 'allUsers'" class="row" style="margin-bottom: 1.25rem;">
            <div class="col-md-4">
                <label class="label2" style="font-size: 14px !important;">
                    <div class="tooltip-container">
                        <span class="nowrap">Chat Feature</span>
                        <span class="btn-info-icon btn-primary">
                            <span class="cp-tooltip">Stick with the built-in chat feature or switch to the new Action Item method,
                                which lets you select actions like the Chat plugin.</span>
                        </span>
                    </div>
                </label>

            </div>
            <div class="col-md-2 radio radio-primary radio-inline" style="width: 20% !important;">
                <input id="ChatFeaturePluginsDefault" type="radio" name="chatFeature" ng-model="data.chatFeature.value" value="default">
                <label class="subtitles-labels" for="ChatFeaturePluginsDefault">Plugin's default</label>
            </div>
            <div class="col-md-2 radio radio-primary radio-inline" style="width: 20% !important;">
                <input id="chatFeatureActionItem" type="radio" name="chatFeature" ng-model="data.chatFeature.value" value="actionItem">
                <label class="subtitles-labels" for="chatFeatureActionItem">Action item</label>
            </div>
        </div>

        <div ng-show="data.chatFeature.value === 'actionItem' && (data.allowChat == 'selectedUsers' || data.allowChat == 'allUsers')">
            <div id="chatFeatureActions" class="padding-bottom-ten"></div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <label class="label2" style="font-size: 14px !important;">Disable Follow/Leave Group</label>
            </div>
            <div class="col-md-8">
                <div class="button-switch">
                    <input id="followLeave" type="checkbox" ng-model="data.disableFollowLeaveGroup" ng-change="save()">
                    <label for="followLeave" class="label-success"></label>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <label class="label2" style="font-size: 14px !important;">Show Members</label>
            </div>
            <div class="col-md-8">
                <div class="button-switch">
                    <input id="showMembers" type="checkbox" ng-model="data.showMembers" ng-change="save()">
                    <label for="showMembers" class="label-success"></label>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <label class="label2" style="font-size: 14px !important;">
                    <div class="tooltip-container">
                        <span class="nowrap">Allow Users to Follow other users</span>
                        <span class="btn-info-icon btn-primary">
                            <span class="cp-tooltip">Requires Community Feed.</span>
                        </span>
                    </div>
                </label>

            </div>
            <div class="col-md-8">
                <div class="button-switch">
                    <input id="allowCommunityFeedFollow" type="checkbox" ng-model="data.allowCommunityFeedFollow" ng-change="save()">
                    <label for="allowCommunityFeedFollow" class="label-success"></label>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <label class="label2" style="font-size: 14px !important;">
                    <div class="tooltip-container">
                        <span class="nowrap">Allow See Profile Option</span>
                        <span class="btn-info-icon btn-primary">
                            <span class="cp-tooltip">This will expose user emails.</span>
                        </span>
                    </div>
                </label>
            </div>
            <div class="col-md-8">
                <div class="button-switch">
                    <input id="seeProfile" type="checkbox" ng-model="data.seeProfile" ng-click="warn()">
                    <label for="seeProfile" class="label-success"></label>
                </div>
            </div>
        </div>

        <h1 style="margin-top: 2rem;">Post Moderation</h1>

        <div class="row">
            <div class="col-md-4">
                <label class="label2" style="font-size: 14px !important;">
                    <div class="tooltip-container">
                        <span class="nowrap">Enable Post Moderation</span>
                        <span class="btn-info-icon btn-primary">
                            <span class="cp-tooltip">When enabled, all posts must be approved by an admin before appearing in the feed. This helps prevent inappropriate content.</span>
                        </span>
                    </div>
                </label>
            </div>
            <div class="col-md-8">
                <div class="button-switch">
                    <input id="enableModeration" type="checkbox" ng-model="data.enableModeration" ng-change="save()">
                    <label for="enableModeration" class="label-success"></label>
                </div>
            </div>
        </div>

        <div class="row" ng-show="data.enableModeration">
            <div class="col-md-4">
                <label class="label2" style="font-size: 14px !important;">
                    <div class="tooltip-container">
                        <span class="nowrap">Notify Admins of New Posts</span>
                        <span class="btn-info-icon btn-primary">
                            <span class="cp-tooltip">Send a notification to admins when a new post is submitted for review.</span>
                        </span>
                    </div>
                </label>
            </div>
            <div class="col-md-8">
                <div class="button-switch">
                    <input id="notifyAdmins" type="checkbox" ng-model="data.notifyAdminsOnPost" ng-change="save()">
                    <label for="notifyAdmins" class="label-success"></label>
                </div>
            </div>
        </div>
    </form>

    <div style="padding: 0px 12px !important;">
        <h1>Action Items</h1>
        <div id="actions"></div>
    </div>

    <div style="padding: 0px 12px !important; margin-top: 2rem;">
        <h1>Theme Colors</h1>
        <p class="label2" style="margin-bottom: 1.5rem; color: #666;">Customize the colors of buttons and icons in the widget</p>

        <div class="row" style="margin-bottom: 1.25rem;">
            <div class="col-md-4">
                <label style="font-size: 14px !important;">FAB Button Color</label>
            </div>
            <div class="col-md-8">
                <input type="color" class="form-control" ng-model="data.themeColors.fabButton" ng-change="save()" style="height: 40px; padding: 4px;">
                <p class="label2" style="font-size: 12px; color: #888; margin-top: 5px;">
                    Color for the floating action button (create post button)
                </p>
            </div>
        </div>

        <div class="row" style="margin-bottom: 1.25rem;">
            <div class="col-md-4">
                <label style="font-size: 14px !important;">Like Icon Color</label>
            </div>
            <div class="col-md-8">
                <input type="color" class="form-control" ng-model="data.themeColors.likeIcon" ng-change="save()" style="height: 40px; padding: 4px;">
                <p class="label2" style="font-size: 12px; color: #888; margin-top: 5px;">
                    Color for the heart/like icon
                </p>
            </div>
        </div>

        <div class="row" style="margin-bottom: 1.25rem;">
            <div class="col-md-4">
                <label style="font-size: 14px !important;">Comment Icon Color</label>
            </div>
            <div class="col-md-8">
                <input type="color" class="form-control" ng-model="data.themeColors.commentIcon" ng-change="save()" style="height: 40px; padding: 4px;">
                <p class="label2" style="font-size: 12px; color: #888; margin-top: 5px;">
                    Color for the chat bubble/comment icon
                </p>
            </div>
        </div>

        <div class="row" style="margin-bottom: 1.25rem;">
            <div class="col-md-4">
                <label style="font-size: 14px !important;">Share Icon Color</label>
            </div>
            <div class="col-md-8">
                <input type="color" class="form-control" ng-model="data.themeColors.shareIcon" ng-change="save()" style="height: 40px; padding: 4px;">
                <p class="label2" style="font-size: 12px; color: #888; margin-top: 5px;">
                    Color for the share/send icon
                </p>
            </div>
        </div>

        <div class="row" style="margin-bottom: 1.25rem;">
            <div class="col-md-4">
                <label style="font-size: 14px !important;">Menu Icon Color</label>
            </div>
            <div class="col-md-8">
                <input type="color" class="form-control" ng-model="data.themeColors.menuIcon" ng-change="save()" style="height: 40px; padding: 4px;">
                <p class="label2" style="font-size: 12px; color: #888; margin-top: 5px;">
                    Color for the three-dot menu icon
                </p>
            </div>
        </div>
    </div>

    <div style="padding: 0px 12px !important; margin-top: 2rem;">
        <h1>Username Typography</h1>
        <p class="label2" style="margin-bottom: 1.5rem; color: #666;">Customize the appearance of usernames in posts and comments</p>

        <div class="row" style="margin-bottom: 1.25rem;">
            <div class="col-md-4">
                <label style="font-size: 14px !important;">Font Family</label>
            </div>
            <div class="col-md-8">
                <select class="form-control" ng-model="data.usernameFont.family" ng-change="save()">
                    <option value="inherit">Default (System Font)</option>
                    <option value="'Roboto', sans-serif">Roboto</option>
                    <option value="'Myriad Pro', 'Myriad', sans-serif">Myriad Pro</option>
                    <option value="Arial, sans-serif">Arial</option>
                    <option value="'Helvetica Neue', Helvetica, sans-serif">Helvetica</option>
                    <option value="'Segoe UI', Tahoma, sans-serif">Segoe UI</option>
                    <option value="'Trebuchet MS', sans-serif">Trebuchet MS</option>
                    <option value="Verdana, sans-serif">Verdana</option>
                    <option value="Georgia, serif">Georgia</option>
                    <option value="'Times New Roman', Times, serif">Times New Roman</option>
                    <option value="'Courier New', Courier, monospace">Courier New</option>
                    <option value="'Comic Sans MS', cursive">Comic Sans MS</option>
                    <option value="Impact, Charcoal, sans-serif">Impact</option>
                </select>
                <p class="label2" style="font-size: 12px; color: #888; margin-top: 5px;">
                    Choose the font family for usernames
                </p>
            </div>
        </div>

        <div class="row" style="margin-bottom: 1.25rem;">
            <div class="col-md-4">
                <label style="font-size: 14px !important;">Font Weight (Boldness)</label>
            </div>
            <div class="col-md-8">
                <select class="form-control" ng-model="data.usernameFont.weight" ng-change="save()">
                    <option value="300">Light (300)</option>
                    <option value="400">Regular (400)</option>
                    <option value="500">Medium (500)</option>
                    <option value="600">Semi-Bold (600)</option>
                    <option value="700">Bold (700)</option>
                    <option value="800">Extra Bold (800)</option>
                    <option value="900">Black (900)</option>
                </select>
                <p class="label2" style="font-size: 12px; color: #888; margin-top: 5px;">
                    Control the boldness of usernames
                </p>
            </div>
        </div>

        <div class="row" style="margin-bottom: 1.25rem;">
            <div class="col-md-4">
                <label style="font-size: 14px !important;">Font Size</label>
            </div>
            <div class="col-md-8">
                <select class="form-control" ng-model="data.usernameFont.size" ng-change="save()">
                    <option value="12px">Small (12px)</option>
                    <option value="13px">Default (13px)</option>
                    <option value="14px">Medium (14px)</option>
                    <option value="15px">Large (15px)</option>
                    <option value="16px">Extra Large (16px)</option>
                    <option value="18px">XL (18px)</option>
                </select>
                <p class="label2" style="font-size: 12px; color: #888; margin-top: 5px;">
                    Set the size of username text
                </p>
            </div>
        </div>
    </div>

    <div style="padding: 0px 12px !important; margin-top: 2rem;">
        <h1>Bottom Logo</h1>
        <p class="label2" style="margin-bottom: 1.5rem; color: #666;">Choose between a small logo or a full-width banner at the bottom of the widget</p>

        <div class="row" style="margin-bottom: 1.25rem;">
            <div class="col-md-4">
                <label style="font-size: 14px !important;">Display Mode</label>
            </div>
            <div class="col-md-3 radio radio-primary radio-inline" style="width: 20% !important;">
                <input id="displayModeLogo" type="radio" name="displayMode" ng-model="data.bottomLogo.displayMode" value="logo" ng-change="save()">
                <label class="subtitles-labels" for="displayModeLogo">Logo Mode</label>
            </div>
            <div class="col-md-3 radio radio-primary radio-inline" style="width: 20% !important;">
                <input id="displayModeBanner" type="radio" name="displayMode" ng-model="data.bottomLogo.displayMode" value="banner" ng-change="save()">
                <label class="subtitles-labels" for="displayModeBanner">Banner Mode</label>
            </div>
        </div>

        <div class="row" style="margin-bottom: 0.5rem;">
            <div class="col-md-12">
                <p class="label2" style="font-size: 12px; color: #888; margin: 0;">
                    <strong>Logo Mode:</strong> Small centered logo with optional text.
                    <strong>Banner Mode:</strong> Full-width clickable banner.
                </p>
            </div>
        </div>

        <div class="row" style="margin-bottom: 1.25rem;">
            <div class="col-md-4">
                <label style="font-size: 14px !important;">
                    <span ng-if="data.bottomLogo.displayMode === 'logo'">Logo Image</span>
                    <span ng-if="data.bottomLogo.displayMode === 'banner'">Banner Image</span>
                </label>
            </div>
            <div class="col-md-8">
                <div ng-if="data.bottomLogo.imageUrl" style="margin-bottom: 10px;">
                    <img ng-src="{{data.bottomLogo.imageUrl}}" style="max-width: 200px; max-height: 100px; border: 1px solid #ddd; border-radius: 4px;">
                </div>
                <button class="btn btn-primary" ng-click="selectBottomLogoImage()">
                    <span class="icon icon-upload margin-right-ten"></span>
                    <span ng-if="!data.bottomLogo.imageUrl">Upload Image</span>
                    <span ng-if="data.bottomLogo.imageUrl">Change Image</span>
                </button>
                <p class="label2" style="font-size: 12px; color: #888; margin-top: 5px;" ng-if="data.bottomLogo.displayMode === 'banner'">
                    Recommended: Wide banner images (e.g., 1200x200px or similar aspect ratio)
                </p>
            </div>
        </div>

        <div class="row" style="margin-bottom: 1.25rem;">
            <div class="col-md-4">
                <label style="font-size: 14px !important;">Link URL</label>
            </div>
            <div class="col-md-8">
                <input type="text" class="form-control" ng-model="data.bottomLogo.linkUrl"
                       placeholder="https://example.com" ng-change="save()">
                <p class="label2" style="font-size: 12px; color: #888; margin-top: 5px;">
                    This URL will open when the banner/logo is clicked
                </p>
            </div>
        </div>

        <div class="row" style="margin-bottom: 1.25rem;">
            <div class="col-md-4">
                <label class="label2" style="font-size: 14px !important;">Enable Banner Display</label>
            </div>
            <div class="col-md-8">
                <div class="button-switch">
                    <input id="bottomLogoEnabled" type="checkbox" ng-model="data.bottomLogo.enabled" ng-change="save()">
                    <label for="bottomLogoEnabled" class="label-success"></label>
                </div>
                <p class="label2" style="font-size: 12px; color: #888; margin-top: 5px;">
                    Toggle banner/logo visibility in the widget
                </p>
            </div>
        </div>

        <div class="row" style="margin-bottom: 1.25rem;">
            <div class="col-md-12">
                <button class="btn btn-danger" ng-click="removeBottomLogo()" ng-if="data.bottomLogo.imageUrl">
                    <span class="icon icon-cross margin-right-ten"></span>Remove Bottom Logo
                </button>
            </div>
        </div>
    </div>
</div>
